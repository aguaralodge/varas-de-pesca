name: Keep Supabase Awake

on:
  schedule:
    # Cada 12 horas (UTC)
    - cron: "0 */12 * * *"
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    timeout-minutes: 5

    steps:
      - name: Ping API (products list)
        run: |
          echo "Pinging products endpoint..."
          curl -fsS -m 25 --retry 3 --retry-delay 5 \
          "https://varas-de-pesca.vercel.app/api/products/list" >/dev/null
          echo "Products endpoint OK"

      - name: Ping Home Page
        run: |
          echo "Pinging home page..."
          curl -fsS -m 25 --retry 3 --retry-delay 5 \
          "https://varas-de-pesca.vercel.app/" >/dev/null
          echo "Home page OK"
